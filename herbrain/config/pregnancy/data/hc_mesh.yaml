hc_dict:
  _target_: polpo.preprocessing.Pipeline
  steps:
    - _target_: polpo.preprocessing.mri.MriNiiLoader
      filename:  ~/.herbrain/data/pregnancy/mri/ses-01/BrainNormalizedToTemplate.nii.gz  # Load MRI NIfTI file

hc_mesh:
  _target_: polpo.preprocessing.Pipeline
  steps:
    - _target_: polpo.preprocessing.dict.DictExtractKey
      data: ${data:hc_dict}  # Use the output of the hc_dict step
      key: image  # Extract only the "image" key from MriNiiLoader's output

    - _target_: polpo.preprocessing.mri.SkimageMarchingCubes
      level: 0
      step_size: 1
      allow_degenerate: false
      method: lewiner

    - _target_: polpo.preprocessing.TupleToList

    - _target_: polpo.preprocessing.RemoveIndex
      index: -1
      inplace: true

    - _target_: polpo.preprocessing.mesh.conversion.TrimeshFromData


hc_mesh_dict:
  _target_: polpo.preprocessing.Pipeline
  steps:
    - _target_: polpo.preprocessing.dict.DictAddEntry
      data: ${data:hc_dict}  # Use the output of the hc_dict step
      key: mesh  # Add the mesh back into the dictionary from MriNiiLoader
      value: ${data:hc_mesh}  # Insert mesh output back into the dictionary